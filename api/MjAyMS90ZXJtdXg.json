{"title":"使用termux+netlify+github+cloudflare搭建hexo+备份及恢复","date":"2021-10-25T06:42:00.000Z","date_formatted":{"ll":"Oct 25, 2021","L":"10/25/2021","MM-DD":"10-25"},"thumbnail":"2021/termux/main.png","link":"2021/termux","comments":true,"tags":["cloudflare","github","hexo","netlify","termux"],"categories":["technology"],"updated":"2023-01-03T19:05:14.589Z","content":"<h1 id=\"准备步骤\">准备步骤<a title=\"#准备步骤\" href=\"#准备步骤\"></a></h1>\n<ol>\n<li><a href=\"#yuming\">域名</a></li>\n<li><a href=\"#github\">github账号</a></li>\n<li><a href=\"#netlify\">netlify账号</a></li>\n<li>一台已经root的手机or电脑</li>\n<li><a href=\"#cloudflare\">cloudflare账号</a></li>\n<li>一个不是特别笨的脑袋</li>\n<li>termux终端</li>\n</ol>\n<h2 id=\"&lt;span-id-=-&quot;yuming&quot;&gt;freenom域名&lt;/span&gt;\"><span id=\"yuming\">freenom域名</span><a title=\"#&lt;span-id-=-&quot;yuming&quot;&gt;freenom域名&lt;/span&gt;\" href=\"#&lt;span-id-=-&quot;yuming&quot;&gt;freenom域名&lt;/span&gt;\"></a></h2>\n<p>域名推荐使用freenom的账号，注册教程网上已经有了很多了，这里就不再赘述了。<br>\n这里说一下我遇到的坑，有的人在注册的时候会碰到选了域名提示不可以的情况，<a href=\"http://xn--zexin-h23h82ut6gzu6al4dx06cf9tlt9c0yf4ox.ga\">这时候在可用里面搜索zexin.ga</a>，我的是这个域名你可以替换成你自己的。<br>\n加到购物车以后有的会发现提交订单后并在My Domains里并没有看到域名，这时候要修改个人信息和查看自己的ip地址与城市街道然后在资料里面修改再提交订单就完成了。<br>\n可以参考<a href=\"https://zhuanlan.zhihu.com/p/115535965\" target=\"_blank\">这一个</a>来进行注册</p>\n<h2 id=\"&lt;span-id-=-&quot;github&quot;&gt;github账号&lt;/span&gt;\"><span id=\"github\">github账号</span><a title=\"#&lt;span-id-=-&quot;github&quot;&gt;github账号&lt;/span&gt;\" href=\"#&lt;span-id-=-&quot;github&quot;&gt;github账号&lt;/span&gt;\"></a></h2>\n<p>自行注册后在github新建一个项目，一定要是公开的。项目名称为 ==你的用户名.github.io== 比如我的GitHub用户名为tgwl那么我就要生成一个tgwl.github.io的新项目</p>\n<h2 id=\"&lt;span-id-=-&quot;netlify&quot;&gt;netlify账号&lt;/span&gt;\"><span id=\"netlify\">netlify账号</span><a title=\"#&lt;span-id-=-&quot;netlify&quot;&gt;netlify账号&lt;/span&gt;\" href=\"#&lt;span-id-=-&quot;netlify&quot;&gt;netlify账号&lt;/span&gt;\"></a></h2>\n<p>这里打开<a href=\"https://www.netlify.com/\" target=\"_blank\">官网</a>并进行注册登录，推荐绑定github账号。</p>\n<h2 id=\"&lt;span-id-=-&quot;cloudflare&quot;&gt;cloudfare账号&lt;/span&gt;\"><span id=\"cloudflare\">cloudfare账号</span><a title=\"#&lt;span-id-=-&quot;cloudflare&quot;&gt;cloudfare账号&lt;/span&gt;\" href=\"#&lt;span-id-=-&quot;cloudflare&quot;&gt;cloudfare账号&lt;/span&gt;\"></a></h2>\n<p>这里打开<a href=\"https://www.cloudflare.com/zh-cn/\" target=\"_blank\">官网</a>并进行注册登录</p>\n<h1 id=\"开始\">开始<a title=\"#开始\" href=\"#开始\"></a></h1>\n<p>先将hexo博客部署在github上，这里我们不使用繁琐的命令，我们使用一个脚本。</p>\n<h2 id=\"部署hexo博客\">部署hexo博客<a title=\"#部署hexo博客\" href=\"#部署hexo博客\"></a></h2>\n<p>为了后续安装快捷。建议替换为清华源，复制以下指令执行：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sed -i &#x27;s@^\\(deb.*stable main\\)$@#\\1\\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main@&#x27; $PREFIX/etc/apt/sources.list</span><br><span class=\"line\"></span><br><span class=\"line\">sed -i &#x27;s@^\\(deb.*games stable\\)$@#\\1\\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/game-packages-24 games stable@&#x27; $PREFIX/etc/apt/sources.list.d/game.list</span><br><span class=\"line\"></span><br><span class=\"line\">sed -i &#x27;s@^\\(deb.*science stable\\)$@#\\1\\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/science-packages-24 science stable@&#x27; $PREFIX/etc/apt/sources.list.d/science.list</span><br><span class=\"line\"></span><br><span class=\"line\">pkg update</span><br></pre></td></tr></table></figure>\n<p>换源成功后，在 Termux 上安装 openssh,git 和 nodejs。此处推荐安装 nodejs 长期支持版本，避免不必要的 bug</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pkg install openssh</span><br><span class=\"line\">pkg install git</span><br><span class=\"line\">pkg install nodejs-lts</span><br></pre></td></tr></table></figure>\n<p>这里要逐行复制然后在终端里面输入安装<br>\n更换 npm 源为阿里镜像</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config set registry http://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>\n<p>以使用 mixplore 或 mt管理器等任何能够访问到 system 分区的文件管理器，直接搜到 /data/data/com.termux/files/home/, 然后在 home 目录下新建一个简易脚本重命名为menu.sh此处分享一个网上发现的脚本，保留了地址想要看的话可以去看看</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/bin/sh</span><br><span class=\"line\">#本脚本用于群友交流，完全开源，可以随意传阅，不过希望保留出处。</span><br><span class=\"line\">echo &quot;===========================================&quot;</span><br><span class=\"line\">echo &quot;       欢迎使用萌新版Hexo控制脚本！&quot;</span><br><span class=\"line\">echo &quot;            双击打开即可使用&quot;</span><br><span class=\"line\">echo &quot;        更多内容可以访问我的博客&quot;</span><br><span class=\"line\">echo &quot;          https://akilar.top&quot;</span><br><span class=\"line\">echo &quot;===========================================&quot;</span><br><span class=\"line\">HexoPath=$(cd &quot;$(dirname &quot;$0&quot;)&quot;; pwd)</span><br><span class=\"line\">cd $&#123;HexoPath&#125;</span><br><span class=\"line\">printf &quot;\\033[32m Blog 根目录：&quot;$&#123;HexoPath&#125;&quot;\\033[0m&quot;</span><br><span class=\"line\">echo &quot; &quot;</span><br><span class=\"line\">echo &quot;[0] 退出菜单&quot;</span><br><span class=\"line\">echo &quot;=============以下功能需要在空文件夹内使用================&quot;</span><br><span class=\"line\">echo &quot;[1] 初始化安装Hexo（仅在第一次安装时使用）&quot;</span><br><span class=\"line\">echo &quot;[2] 从云端恢复Hexo（需要在脚本中配置仓库URL）&quot;</span><br><span class=\"line\">echo &quot;=============以下功能需要在Hexo文件夹内使用================&quot;</span><br><span class=\"line\">echo &quot;[3] 开启本地预览&quot;</span><br><span class=\"line\">echo &quot;[4] 重新编译后开启本地预览（修改过_config.yml需使用这个才能看到变化）&quot;</span><br><span class=\"line\">echo &quot;[5] 部署页面到博客网站&quot;</span><br><span class=\"line\">echo &quot;[6] 从Github拉取最新版本（需要在脚本中配置仓库URL）&quot;</span><br><span class=\"line\">echo &quot;[7] 提交本地修改到GitHub&quot;</span><br><span class=\"line\">echo &quot;[8] 升级Hexo及插件（慎用）&quot;</span><br><span class=\"line\">echo &quot;[9] 安装butterfly主题&quot;</span><br><span class=\"line\">echo &quot;[10] 安装volantis主题&quot;</span><br><span class=\"line\">echo &quot;[11] 安装Hexo-Admin(用于管理或撰写Hexo博文，适合初学者使用)&quot;</span><br><span class=\"line\">echo &quot;=============以下功能为全局指令================&quot;</span><br><span class=\"line\">echo &quot;[12] 安装ssh密钥&quot;</span><br><span class=\"line\">echo &quot;[13] 验证ssh密钥&quot;</span><br><span class=\"line\">echo &quot; &quot;</span><br><span class=\"line\">printf &quot;请选择需要的功能，默认选择[3] 开启本地预览&quot;</span><br><span class=\"line\">echo &quot; &quot;</span><br><span class=\"line\">printf &quot;选择：&quot;</span><br><span class=\"line\">read answer</span><br><span class=\"line\"></span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;1&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在为您创建Hexo文件夹 ...\\n&quot;</span><br><span class=\"line\">mkdir Hexo</span><br><span class=\"line\">cd Hexo</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在将npm源替换为阿里云镜像 ...\\n&quot;</span><br><span class=\"line\">npm config set registry https://registry.npm.taobao.org # 替换NPM源为阿里镜像</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在为您全局安装Hexo命令集...\\n&quot;</span><br><span class=\"line\">npm install -g hexo-cli</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 即将为您开始Hexo初始化安装...\\n&quot;</span><br><span class=\"line\">hexo init</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在为您安装必要依赖...\\n&quot;</span><br><span class=\"line\">npm install --save</span><br><span class=\"line\">npm install hexo-deployer-git --save</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 请查看您当前的Hexo版本...\\n&quot;</span><br><span class=\"line\">hexo version</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 安装完成，您可以开始您的Hexo之旅了！\\n&quot;</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 请将本脚本文件放入Hexo文件夹以继续使用其他功能！\\n&quot;</span><br><span class=\"line\">sleep 5s</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 请将本脚本文件放入Hexo文件夹以继续使用其他功能！\\n&quot;</span><br><span class=\"line\">sleep 5s</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 请将本脚本文件放入Hexo文件夹以继续使用其他功能！\\n&quot;</span><br><span class=\"line\">sleep 5s</span><br><span class=\"line\">exit 0</span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;2&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在从Github拉取博客源码 ...\\n&quot;</span><br><span class=\"line\">git clone https://github.com/tgwl/tgwl.github.git Hexo # 记得替换仓库URL为自己的源码存放仓库</span><br><span class=\"line\">cd Hexo</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在将npm源替换为阿里云镜像 ...\\n&quot;</span><br><span class=\"line\">npm config set registry https://registry.npm.taobao.org # 替换NPM源为阿里镜像</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m Hexo恢复中...\\n&quot;</span><br><span class=\"line\">npm install -g hexo-cli</span><br><span class=\"line\"># npm install gulp-cli -g #全局安装gulp，未配置不用开启</span><br><span class=\"line\">npm install --save</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 恢复完成，您可以开始您的Hexo之旅了！\\n&quot;</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 请将本脚本文件放入Hexo文件夹以继续使用其他功能！\\n&quot;</span><br><span class=\"line\">sleep 5s</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 请将本脚本文件放入Hexo文件夹以继续使用其他功能！\\n&quot;</span><br><span class=\"line\">sleep 5s</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 请将本脚本文件放入Hexo文件夹以继续使用其他功能！\\n&quot;</span><br><span class=\"line\">sleep 5s</span><br><span class=\"line\">exit 0</span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;3&quot; ] || [ &quot;$answer&quot; = &quot;&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在启动本地预览，可以按Ctrl+C退出\\n&quot;</span><br><span class=\"line\">hexo s</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;4&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在清理本地缓存...\\n&quot;</span><br><span class=\"line\">hexo clean</span><br><span class=\"line\"># printf &quot;\\033[32mINFO \\033[0m 正在更新番剧列表...\\n&quot;</span><br><span class=\"line\"># hexo bangumi -u #bilibili追番插件，未配置无需开启</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在重新编译静态页面...\\n&quot;</span><br><span class=\"line\">hexo generate</span><br><span class=\"line\"># printf &quot;\\033[32mINFO \\033[0m 正在压缩静态资源...\\n&quot;</span><br><span class=\"line\"># gulp #gulp插件，未配置无需开启</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在开启本地预览，可以按Ctrl+C退出\\n&quot;</span><br><span class=\"line\">hexo server</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;5&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在清理本地缓存...\\n&quot;</span><br><span class=\"line\">hexo clean</span><br><span class=\"line\"># printf &quot;\\033[32mINFO \\033[0m 正在更新番剧列表...\\n&quot;</span><br><span class=\"line\"># hexo bangumi -u #bilibili追番插件，未配置无需开启</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在重新编译静态页面...\\n&quot;</span><br><span class=\"line\">hexo generate</span><br><span class=\"line\"># printf &quot;\\033[32mINFO \\033[0m 正在压缩静态资源...\\n&quot;</span><br><span class=\"line\"># gulp #gulp插件，未配置无需开启</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在准备将最新修改部署至Hexo...\\n&quot;</span><br><span class=\"line\">hexo deploy</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 部署完成，您的网站已经是最新版本！\\n&quot;</span><br><span class=\"line\">sleep 1s</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;6&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在从Github拉取最新版本...\\n&quot;</span><br><span class=\"line\">git pull origin master #2020年10月后github新建仓库默认分支改为main，注意更改</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 拉取完毕，您的博客已是最新版本！\\n&quot;</span><br><span class=\"line\">sleep 1s</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;7&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在提交最新修改到GitHub...\\n&quot;</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &quot;Update posts content&quot;</span><br><span class=\"line\">git push origin master #2020年10月后github新建仓库默认分支改为main，注意更改</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 提交完毕，您的修改已上传至Github！\\n&quot;</span><br><span class=\"line\">sleep 1s</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;8&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 请先确认当前版本 ...\\n&quot;</span><br><span class=\"line\">hexo version</span><br><span class=\"line\">sleep 3s</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 即将为您全局升级hexo-cli...\\n&quot;</span><br><span class=\"line\">npm install hexo-cli -g</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m hexo-cli升级完成，请查看当前版本。\\n&quot;</span><br><span class=\"line\">hexo version</span><br><span class=\"line\">sleep 3s</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 即将为您升级npm-check...\\n&quot;</span><br><span class=\"line\">npm install -g npm-check</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m npm-check升级完成！\\n&quot;</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在使用npm-check检查系统是否有可升级插件...\\n&quot;</span><br><span class=\"line\">npm-check</span><br><span class=\"line\">sleep 3s</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 即将为您升级npm-upgrade...\\n&quot;</span><br><span class=\"line\">npm install -g npm-upgrade</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在使用npm-upgrade升级插件...\\n&quot;</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 您可以在接下来的过程中主动选择是否升级插件\\n&quot;</span><br><span class=\"line\">npm-upgrade</span><br><span class=\"line\">sleep 1s</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在为您保存升级结果...\\n&quot;</span><br><span class=\"line\">npm update -g</span><br><span class=\"line\">npm update --save</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 恭喜您，您的Hexo已经是最新版本\\n&quot;</span><br><span class=\"line\">sleep 2s</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;9&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在为您下载最新稳定版butterfly主题 ...\\n&quot;</span><br><span class=\"line\">git clone -b master https://gitee.com/iamjerryw/hexo-theme-butterfly.git themes/butterfly</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在为您安装必要依赖！\\n&quot;</span><br><span class=\"line\">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 安装完成，感谢您对butterfly的支持！\\n&quot;</span><br><span class=\"line\">sleep 1s</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 请在/Hexo/_config.yml中将theme修改为butterfly以激活主题！\\n&quot;</span><br><span class=\"line\">sleep 3s</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;10&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在为您下载最新稳定版volantis主题 ...\\n&quot;</span><br><span class=\"line\">git clone https://github.com/volantis-x/hexo-theme-volantis themes/volantis</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在安装本地搜索必要依赖！\\n&quot;</span><br><span class=\"line\">npm install hexo-generator-search --save</span><br><span class=\"line\">npm install hexo-generator-json-content --save</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在安装页面渲染必要依赖！\\n&quot;</span><br><span class=\"line\">npm install hexo-renderer-stylus --save</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 安装完成，感谢您对volantis的支持！\\n&quot;</span><br><span class=\"line\">sleep 1s</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 请在/Hexo/_config.yml中将theme修改为volantis以激活主题！\\n&quot;</span><br><span class=\"line\">sleep 3s</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;11&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在为您下载Hexo-Admin插件 ...\\n&quot;</span><br><span class=\"line\">npm install hexo-admin --save</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 安装完成，即将为您启动本地预览！\\n&quot;</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 请访问 http://localhost:4000/admin/ 进行博文编辑！\\n&quot;</span><br><span class=\"line\">sleep 2s</span><br><span class=\"line\">hexo server</span><br><span class=\"line\">sleep 1s</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\"></span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;12&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在重新设置github global config...\\n&quot;</span><br><span class=\"line\">git config --global user.name &quot;tgwl&quot; # 记得替换用户名为自己的</span><br><span class=\"line\">git config --global user.email &quot;tg2521150881@gmail.com&quot; # 记得替换邮箱为自己的</span><br><span class=\"line\">ssh-keygen -t rsa -C tg2521150881@gmail.com # 记得替换邮箱为自己的</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 即将打开sshkey，复制后可按 Ctrl+D 返回...\\n&quot;</span><br><span class=\"line\">sleep 2s</span><br><span class=\"line\">less ~/.ssh/id_rsa.pub</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 配置完成，请将sshkey添加到Github！\\n&quot;</span><br><span class=\"line\">sleep 1s</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;13&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 正在验证SSHkey是否配置成功 ...\\n&quot;</span><br><span class=\"line\">ssh -T git@github.com</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 验证完毕，您的SSHkey已成功绑定至Github！\\n&quot;</span><br><span class=\"line\">sleep 1s</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\"></span><br><span class=\"line\">else</span><br><span class=\"line\">if [ &quot;$answer&quot; = &quot;0&quot; ]; then</span><br><span class=\"line\">printf &quot;\\033[32mINFO \\033[0m 欢迎下次光临！\\n&quot;</span><br><span class=\"line\">sleep 1s</span><br><span class=\"line\">exit 0</span><br><span class=\"line\">else</span><br><span class=\"line\">printf &quot;\\033[31mERROR \\033[0m 输入错误，请返回重新选择...\\n&quot;</span><br><span class=\"line\">sleep 1s</span><br><span class=\"line\">exec $&#123;HexoPath&#125;/menu.sh</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br><span class=\"line\">fi</span><br></pre></td></tr></table></figure>\n<p>里面有些用户名和邮箱需要自己修改<br>\n脚本新建完成后，回到 Termux 终端，使用指令运行脚本打开菜单页面，按照菜单指示进行配置 sshkey 和重装 hexo：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bash menu.sh</span><br></pre></td></tr></table></figure>\n<p>脚本使用不再赘述，提示如果使用脚本生成shhkey需要在脚本里配置账号和邮箱，如果不配置的话脚本是生成不了的，当然也可以手动配置，这里大概说下流程，使用脚本先输入命令1然后会在home里面生成一个Hexo的文件，再按照脚本提示将menu.sh移动到Hexo里面，我使用的是mt管理器，移动到里面之后再使用termux</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd Hexo</span><br></pre></td></tr></table></figure>\n<p>然后在运行脚本</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bash menu.sh</span><br></pre></td></tr></table></figure>\n<p>生成sshkey后复制完整，当然也可以打开home/.ssh/id_rsa.pub，这里就是生成的文件也可以在这里复制。<br>\n然后打开github打开你的项目，settings-deploy keys-add 右上角deploy key<br>\ntitle可以随便填一个key填你复制的sshkey然后在Allow write access就完成了，详细的可以看下面的一篇文章搭配脚本使用。<br>\n这时候使用mt管理器打开Hexo里面有一个_config.yml我们打开然后这样配置</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deploy:</span><br><span class=\"line\">    type: git</span><br><span class=\"line\">    repo: git@github.com:你的用户名/你的用户名.github.io.git</span><br><span class=\"line\">    branch: master</span><br></pre></td></tr></table></figure>\n<p>这里面空格什么的一定不要少<br>\n修改里面内容，mt管理器修改文件后会生成一个同名的备份文件记得删除。<br>\n修改完成后运行脚本，记住一定是在Hexo里面运行，可以先ls查看一下文件如果有一堆文件的话证明是在Hexo里如果ls后看到Hexo说明在hexo外这时候用cd Hexo就可以进入文件使用脚本了。<br>\n可以先本地预览一下再部署到博客，参考脚本命令，如果运行脚本输入5后，等待完成就可以在浏览器打开<br>\n你的用户名.github.io预览了如果成功了进行下一步如果没有成功查看报错然后谷歌。<br>\n你也可以搭配<a href=\"https://nibazshab.github.io/post/4/\" target=\"_blank\">这篇文章</a>使用。</p>\n<h2 id=\"换主题\">换主题<a title=\"#换主题\" href=\"#换主题\"></a></h2>\n<p>这里我使用inside主题进行演示，先cd Hexo然后使用命令</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone git@github.com:ikeq/hexo-theme-inside.git themes/inside</span><br></pre></td></tr></table></figure>\n<p>等下载完后可以在hexo/theme/里面看到一个inside文件夹这就是我们的主题，打开配置文件_config.yml找到theme将后面修改问inside，注意之间要留空格。然后运行脚本可以先在本地预览然后部署到github。<br>\n我在修改主题时候碰到过修改主题乱码的坑这里写下我自己的解决方案。原因是hexo在5.0之后把swig给删除了需要自己手动安装<br>\n问题解决</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i hexo-renderer-swig</span><br></pre></td></tr></table></figure>\n<p>然后再部署</p>\n<h1 id=\"将博客部署到netlify\">将博客部署到netlify<a title=\"#将博客部署到netlify\" href=\"#将博客部署到netlify\"></a></h1>\n<p>首先直接使用 GitHub 账号登录 Netlify，点击界面中的New site from Git按钮：<br>\n<img src=\"/2021/termux/n1.png\" alt><br>\n第一步，选择连接 GitHub：<br>\n<img src=\"/2021/termux/n2.png\" alt><br>\n授权，直接按照默认的选项点击Install即可：<br>\n<img src=\"/2021/termux/n3.png\" alt><br>\n第二步，选择博客的仓库，比如我的 <a href=\"http://tgwl.github.io\">tgwl.github.io</a> 仓库：<br>\n第三步，配置选项、构建部署：<br>\n接着等待片刻就部署成功了<br>\n<img src=\"/2021/termux/n4.png\" alt><br>\n点击domain settings可以设置域名<br>\n<img src=\"/2021/termux/n5.png\" alt><br>\n然后修改你想要改的域名就完成了<br>\n<img src=\"/2021/termux/n6.png\" alt><br>\n<a href=\"https://xuezenghui.com/posts/hexo-deploy-to-netlify/\" target=\"_blank\">参考</a></p>\n<h2 id=\"将freenom域名解析到cloudlfare上\">将freenom域名解析到cloudlfare上<a title=\"#将freenom域名解析到cloudlfare上\" href=\"#将freenom域名解析到cloudlfare上\"></a></h2>\n<p>登录你的freenom账号，如果没注册域名点<a href=\"#yuming\">这里</a><br>\n<img src=\"/2021/termux/y1.png\" alt><br>\n这里可以看到你的域名，点击Manage Domain<br>\n<img src=\"/2021/termux/y2.png\" alt><br>\n这时候回到cloudflare登录，右上角可以改到中文然后添加站点填你注册的域名比如我zexin.ga然后选免费，下一步等到看到这个的时候<br>\n<img src=\"/2021/termux/y3.png\" alt><br>\n复制这两个回到freenom在manage domain页面点这个<br>\n<img src=\"/2021/termux/y4.png\" alt><br>\n然后选择我圈的内容，将复制的两条Dns粘贴在里面就完成了<br>\n<img src=\"/2021/termux/y5.png\" alt><br>\n回到cloudflare当你的域名显示这个就表示成功了<br>\n<img src=\"/2021/termux/y6.png\" alt></p>\n<h2 id=\"在netlify配置你的域名\">在netlify配置你的域名<a title=\"#在netlify配置你的域名\" href=\"#在netlify配置你的域名\"></a></h2>\n<p>打开netify点进去你的项目然后点这里<br>\n<img src=\"/2021/termux/a1.png\" alt><br>\n点击这里可以添加你的域名，因为我已经添加过了就不再进行演示，添加的时候直接下一步。<br>\n<img src=\"/2021/termux/a3.png\" alt><br>\n完成后点击这里<br>\n<img src=\"/2021/termux/a4.png\" alt><br>\n然后可以看到这个页面，看好圈住的A<br>\n<img src=\"/2021/termux/a5.png\" alt><br>\n然后打开cloudflare网站找到你的域名然后点进去再点上面的DNS<br>\n<img src=\"/2021/termux/a2.png\" alt><br>\n然后点击这里添加看图<br>\n<img src=\"/2021/termux/a6.png\" alt><br>\n有的人可能不知道名称为什么填一个 <strong>@</strong> ，这里说一下，<a href=\"http://xn--zexin-dq1hr2ev7pq1ix9d8v0ee20ami2d.ga\">比如说你的域名为zexin.ga</a> 那么名称填 <strong>@</strong> 的话，直接访问zexin.ga就可以打开，你也可以在名称里填一个www那么访问www.zexin.ga就可以打开。<br>\n<img src=\"/2021/termux/a7.png\" alt><br>\n接下来回到netlify，解析下一个域名<br>\n<img src=\"/2021/termux/a8.png\" alt><br>\n记住我圈的内容为 <em>名称</em> 框的内容为 <em>类型</em>  ，使用绿色框住的复制下来，这里我打码了。<br>\n<img src=\"/2021/termux/a9.png\" alt><br>\n然后回到cloudflare，跟上一步一样，类型选CNAME，名称填www，地址填复制的那一段然后就完成了。<br>\n<img src=\"/2021/termux/a10.png\" alt><br>\n然后就可以在<a href=\"https://tool.lu/ip/\" target=\"_blank\">这里</a>查到了<br>\n<img src=\"/2021/termux/a11.png\" alt><br>\n这里再提一下我遇到的坑，有的添加域名后点击Check DNS configuration会发现不是上面的页面，而是一些dns1 dns2 dns3 ，原因是你第一次添加后把项目删了或者种种原因才会出现这个页面，因为cloudflare的自定义名称服务器是收费的<br>\n<img src=\"/2021/termux/a12.png\" alt><br>\n所以我们要打开netlify，在域名页面的Options选项会出现第三个选项，我们进去后删除dns再回来就会出现上面的页面，就可以正常去cloudflare解析了。<br>\n<img src=\"/2021/termux/a13.png\" alt></p>\n<h1 id=\"博客备份github及恢复\">博客备份github及恢复<a title=\"#博客备份github及恢复\" href=\"#博客备份github及恢复\"></a></h1>\n<p>首先打开github新建一个分支，我这里取名叫hexo<br>\n<img src=\"/2021/termux/b1.png\" alt><br>\n在输入框里输入你想要生成的分支名字然后就会提示你新建一个，然后打开设置<br>\n<img src=\"/2021/termux/b2.png\" alt><br>\n然后进入点击后面的符号<br>\n<img src=\"/2021/termux/b3.png\" alt><br>\n看到页面后修改你新添加的分支为然后update<br>\n<img src=\"/2021/termux/b4.png\" alt></p>\n<h2 id=\"备份\">备份<a title=\"#备份\" href=\"#备份\"></a></h2>\n<p>打开termux执行</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/username/uesrname.github.io.git</span><br></pre></td></tr></table></figure>\n<p>username为你的用户名修改即可<br>\n执行完成后本地会有一个这样的文件夹<br>\n<img src=\"/2021/termux/b5.png\" alt><br>\n将克隆下来的目录中除了.git文件夹外的所有文件都删掉，如果看不到.git文件夹请打开显示隐藏文件夹<br>\n<img src=\"/2021/termux/b6.png\" alt><br>\n将本地博客文件夹下除了.deploy_git的其他源文件全部复制过来<br>\n<strong>如果之前克隆过themes中的主体文件，要将主题文件中的.git目录删除掉，否则无法备份主题文件</strong><br>\n<img src=\"/2021/termux/b7.png\" alt><br>\n然后打开termux进入备份的文件夹，这里推荐改一下名好进，比如说改成back，termux执行cd back然后执行命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &quot;此次提交的备注&quot;</span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n<p>输入账号和密码会发现报错，这是因为从2021年8月13日起GitHub不再支持密码验证<br>\n所以我们要打开github 选择“Settings”<br>\n<img src=\"/2021/termux/b8.png\" alt><br>\n选择“Developer settings”<br>\n<img src=\"/2021/termux/b9.png\" alt><br>\n选择“Personal access token”<br>\n<img src=\"/2021/termux/b10.png\" alt><br>\n选择“Generate new token”<br>\n<img src=\"/2021/termux/b11.png\" alt><br>\n输入Note，有效期我设置了无限长，选择范围全选<br>\n<img src=\"/2021/termux/b12.png\" alt><br>\n生成了access token（这个token一定要保存好，因为之后就看不到了）<br>\n<img src=\"/2021/termux/b13.png\" alt><br>\n在password时输入上面生成的token即可<br>\n<img src=\"/2021/termux/b14.png\" alt><br>\ntermux在输入密码的时候可能会看不见，直接复制进去回车就行了。</p>\n<h2 id=\"恢复\">恢复<a title=\"#恢复\" href=\"#恢复\"></a></h2>\n<p>安装Git并配置好全局变量</p>\n<p>安装node.js，npm以及hexo，这时安装hexo就不需要初始化了</p>\n<p>在任意目录下执行git clone 注意修改username</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://github.com/username/username.github.io.git</span><br></pre></td></tr></table></figure>\n<p>进入到克隆好的文件夹执行：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install</span><br><span class=\"line\">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n<p>参考:</p>\n<p><a href=\"https://blog.csdn.net/qq_44997147/article/details/119755878\" target=\"_blank\">解决备份密码问题</a></p>\n<p><a href=\"https://blog.csdn.net/tsuki0512/article/details/107823106\" target=\"_blank\">备份</a></p>\n<h3 id=\"hexo插入本地图片不显示问题\">hexo插入本地图片不显示问题<a title=\"#hexo插入本地图片不显示问题\" href=\"#hexo插入本地图片不显示问题\"></a></h3>\n<p>1.修改配置文件</p>\n<p>找到hexo根目录下_config.yml配置文件中post_asset_folder设置为true</p>\n<p>修改后再次创建md文件时会同事生成一个同名的文件夹</p>\n<p>2.安装hexo-asset-image插件<br>\nnpm安装</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure>\n<p>3.在md中插入图片（相对路径）</p>\n<p>生成的图片放入到md同名文件夹中设置路径</p>\n<h1 id=\"其他\">其他<a title=\"#其他\" href=\"#其他\"></a></h1>\n<p>这里推荐一下在线写hexo的方案:</p>\n<p><a href=\"https://www.myql.xyz/post/e00ab0f6/\" target=\"_blank\">Hexo Netlify CMS-暮雨千泷</a></p>\n<p><a href=\"https://github.com/leicancun/hexo-blog-netlify\" target=\"_blank\">一键部署脚本</a></p>\n<p><a href=\"https://blog.csdn.net/hangvane123/article/details/113751387\" target=\"_blank\">【经验】静态博客部署 Hexo + Netlify-CMS + Vercel （在线构建</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/56319868\" target=\"_blank\">为 Hexo 博客集成 Netlify CMS</a></p>\n<p><a href=\"https://www.v2ex.com/t/801691\" target=\"_blank\">Hexo + Netlify-CMS + Vercel 在线部署模板（免本地环境，免敲命令），以及 Academia 学术主页模板</a></p>\n<p>不过本人发现上面这些在线办法如果本地写博客然后部署可能会将在线写的覆盖掉。<br>\n<strong>思路:本地先将github上的克隆下来然后重新部署。</strong></p>\n<h1 id=\"更新问题\">更新问题<a title=\"#更新问题\" href=\"#更新问题\"></a></h1>\n<p>2023年1月4日</p>\n<h2 id=\"部署时提示index下无markdownit使用命令\">部署时提示index下无markdownit使用命令<a title=\"#部署时提示index下无markdownit使用命令\" href=\"#部署时提示index下无markdownit使用命令\"></a></h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install markdown-it markdown-it-container</span><br></pre></td></tr></table></figure>\n<h2 id=\"文章图片无法访问\">文章图片无法访问<a title=\"#文章图片无法访问\" href=\"#文章图片无法访问\"></a></h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure>\n<p>并修改node_modules/hexo-asset-image/index.js下代码为</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x27;use strict&#x27;;</span><br><span class=\"line\">var cheerio = require(&#x27;cheerio&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span><br><span class=\"line\">function getPosition(str, m, i) &#123;</span><br><span class=\"line\">  return str.split(m, i).join(m).length;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">var version = String(hexo.version).split(&#x27;.&#x27;);</span><br><span class=\"line\">hexo.extend.filter.register(&#x27;after_post_render&#x27;, function(data)&#123;</span><br><span class=\"line\">  var config = hexo.config;</span><br><span class=\"line\">  if(config.post_asset_folder)&#123;</span><br><span class=\"line\">    \tvar link = data.permalink;</span><br><span class=\"line\">\tif(version.length &gt; 0 &amp;&amp; Number(version[0]) == 3)</span><br><span class=\"line\">\t   var beginPos = getPosition(link, &#x27;/&#x27;, 1) + 1;</span><br><span class=\"line\">\telse</span><br><span class=\"line\">\t   var beginPos = getPosition(link, &#x27;/&#x27;, 3) + 1;</span><br><span class=\"line\">\t// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span><br><span class=\"line\">\tvar endPos = link.lastIndexOf(&#x27;/&#x27;) + 1;</span><br><span class=\"line\">    link = link.substring(beginPos, endPos);</span><br><span class=\"line\"></span><br><span class=\"line\">    var toprocess = [&#x27;excerpt&#x27;, &#x27;more&#x27;, &#x27;content&#x27;];</span><br><span class=\"line\">    for(var i = 0; i &lt; toprocess.length; i++)&#123;</span><br><span class=\"line\">      var key = toprocess[i];</span><br><span class=\"line\"> </span><br><span class=\"line\">      var $ = cheerio.load(data[key], &#123;</span><br><span class=\"line\">        ignoreWhitespace: false,</span><br><span class=\"line\">        xmlMode: false,</span><br><span class=\"line\">        lowerCaseTags: false,</span><br><span class=\"line\">        decodeEntities: false</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">      $(&#x27;img&#x27;).each(function()&#123;</span><br><span class=\"line\">\t\tif ($(this).attr(&#x27;src&#x27;))&#123;</span><br><span class=\"line\">\t\t\t// For windows style path, we replace &#x27;\\&#x27; to &#x27;/&#x27;.</span><br><span class=\"line\">\t\t\tvar src = $(this).attr(&#x27;src&#x27;).replace(&#x27;\\\\&#x27;, &#x27;/&#x27;);</span><br><span class=\"line\">\t\t\tif(!/http[s]*.*|\\/\\/.*/.test(src) &amp;&amp;</span><br><span class=\"line\">\t\t\t   !/^\\s*\\//.test(src)) &#123;</span><br><span class=\"line\">\t\t\t  // For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span><br><span class=\"line\">\t\t\t  // In addition, to support multi-level local directory.</span><br><span class=\"line\">\t\t\t  var linkArray = link.split(&#x27;/&#x27;).filter(function(elem)&#123;</span><br><span class=\"line\">\t\t\t\treturn elem != &#x27;&#x27;;</span><br><span class=\"line\">\t\t\t  &#125;);</span><br><span class=\"line\">\t\t\t  var srcArray = src.split(&#x27;/&#x27;).filter(function(elem)&#123;</span><br><span class=\"line\">\t\t\t\treturn elem != &#x27;&#x27; &amp;&amp; elem != &#x27;.&#x27;;</span><br><span class=\"line\">\t\t\t  &#125;);</span><br><span class=\"line\">\t\t\t  if(srcArray.length &gt; 1)</span><br><span class=\"line\">\t\t\t\tsrcArray.shift();</span><br><span class=\"line\">\t\t\t  src = srcArray.join(&#x27;/&#x27;);</span><br><span class=\"line\">\t\t\t  $(this).attr(&#x27;src&#x27;, config.root + link + src);</span><br><span class=\"line\">\t\t\t  console.info&amp;&amp;console.info(&quot;update link as:--&gt;&quot;+config.root + link + src);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;else&#123;</span><br><span class=\"line\">\t\t\tconsole.info&amp;&amp;console.info(&quot;no src attr, skipped...&quot;);</span><br><span class=\"line\">\t\t\tconsole.info&amp;&amp;console.info($(this));</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      data[key] = $.html();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>详见<a href=\"https://juejin.cn/post/7006594302604214280\" target=\"_blank\">解决hexo无法访问图片路径</a></p>\n","prev":{"title":"JavaScript函数自调用与闭包","link":"2021/2"},"plink":"https://tgwl.github.io/2021/termux/","toc":[{"id":"准备步骤","title":"准备步骤","index":"1","children":[{"id":"<span-id-=-\"yuming\">freenom域名</span>","title":"freenom域名","index":"1.1"},{"id":"<span-id-=-\"github\">github账号</span>","title":"github账号","index":"1.2"},{"id":"<span-id-=-\"netlify\">netlify账号</span>","title":"netlify账号","index":"1.3"},{"id":"<span-id-=-\"cloudflare\">cloudfare账号</span>","title":"cloudfare账号","index":"1.4"}]},{"id":"开始","title":"开始","index":"2","children":[{"id":"部署hexo博客","title":"部署hexo博客","index":"2.1"},{"id":"换主题","title":"换主题","index":"2.2"}]},{"id":"将博客部署到netlify","title":"将博客部署到netlify","index":"3","children":[{"id":"将freenom域名解析到cloudlfare上","title":"将freenom域名解析到cloudlfare上","index":"3.1"},{"id":"在netlify配置你的域名","title":"在netlify配置你的域名","index":"3.2"}]},{"id":"博客备份github及恢复","title":"博客备份github及恢复","index":"4","children":[{"id":"备份","title":"备份","index":"4.1"},{"id":"恢复","title":"恢复","index":"4.2","children":[{"id":"hexo插入本地图片不显示问题","title":"hexo插入本地图片不显示问题","index":"4.2.1"}]}]},{"id":"其他","title":"其他","index":"5"},{"id":"更新问题","title":"更新问题","index":"6","children":[{"id":"部署时提示index下无markdownit使用命令","title":"部署时提示index下无markdownit使用命令","index":"6.1"},{"id":"文章图片无法访问","title":"文章图片无法访问","index":"6.2"}]}],"reward":true,"copyright":{"author":"Zezin","link":"<a href=\"https://tgwl.github.io/2021/termux/\" title=\"使用termux+netlify+github+cloudflare搭建hexo+备份及恢复\">https://tgwl.github.io/2021/termux/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}